(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{17:function(e,t,n){"use strict";(function(e){var t=n(2),r=n(26);n(4),(0,t.render)(e.createElement(r.App,null),document.getElementById("app"))}).call(this,n(1))},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(1)),o=(n(2),u(n(10)),u(n(16))),i=n(48),c=n(49),l=n(50),s=n(51);function u(e){return e&&e.__esModule?e:{default:e}}var f=n(56);t.App=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={playerName:"",started:!1,joined:!1,players:[],gameCard:{},whiteCards:[],selectedCards:[],votes:[]},n.handleInputChange=n.handleInputChange.bind(n),n.joinGame=n.joinGame.bind(n),n.startStopGame=n.startStopGame.bind(n),n.selectCard=n.selectCard.bind(n),n.sendCards=n.sendCards.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"resetClient",value:function(e){void 0===e&&(e=this),e.setState({joined:!1,players:[],started:!1,whiteCards:[],selectedCards:[],gameCard:{},votes:[]})}},{key:"setupHub",value:function(){var e=f.HttpTransportType.WebSockets,t=this;t.gameConnection=(new f.HubConnectionBuilder).withUrl(document.location.protocol+"//"+document.location.host+"/game",{transport:e}).build(),t.gameConnection.onClosed=function(e){console.log("Connection closed")},t.gameConnection.on("PlayerJoined",function(e){t.setState({players:e})}),t.gameConnection.on("PlayerLeft",function(e){t.setState({players:e})}),t.gameConnection.on("GameStarted",function(e){return t.setState({started:e.started,gameCard:e.gameCard})}),t.gameConnection.on("GameStopped",function(){return t.setState({started:!1,gameCard:{},votes:[]})}),t.gameConnection.on("ReceiveCards",function(e){var n=o.default.shuffle(t.state.whiteCards.slice(0).concat(e));t.setState({whiteCards:n})}),t.gameConnection.on("ReceiveChoices",function(e){return t.setState({votes:e,gameCard:{text:"Time to vote!"}})}),t.gameConnection.start().then(function(){return t.gameConnection.invoke("JoinGame",t.state.playerName).then(function(e){t.setState({joined:e.joined,started:e.gameState.started,whiteCards:e.whiteCards,selectedCards:[]})})},function(e){console.log("Connection error")})}},{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,n))}},{key:"joinGame",value:function(e){if(e.preventDefault(),!1===this.state.joined)this.setupHub();else{var t=this;t.gameConnection.invoke("LeaveGame").then(function(){t.resetClient(),t.gameConnection.stop().catch(function(e){return console.log("Error closing connection "+e)})},function(e){return t.resetClient(t)})}}},{key:"startStopGame",value:function(e){e.preventDefault(),this.state.started?this.gameConnection.invoke("StopGame"):this.gameConnection.invoke("StartGame")}},{key:"selectCard",value:function(e){var t=this.state.whiteCards.slice(0),n=this.state.selectedCards.slice(0),r=this.state.gameCard.pick;o.default.forEach(t,function(t){t.id===e.id&&(t.selected?(t.selected=!1,o.default.remove(n,function(t){return t===e.id})):n.length<r&&(t.selected=!0,n.push(t.id)))}),this.setState({whiteCards:t,selectedCards:n})}},{key:"sendCards",value:function(e){e.preventDefault();this.state.selectedCards.slice(0);var t=this.state.whiteCards.slice(0);o.default.remove(t,function(e){return e.selected}),this.setState({whiteCards:t,selectedCards:[]}),this.gameConnection.invoke("SendCards",this.state.selectedCards)}},{key:"render",value:function(){var e=this.state.playerName,t=this.state.players,n=this.state.joined,r=this.state.started,o=this.state.gameCard,u=this.state.whiteCards,f=null;this.state.votes.length&&(f=this.state.votes.map(function(e){return a.default.createElement("li",{key:e.key},e.value," ",a.default.createElement("button",{className:"btn btn-sm btn-info"},a.default.createElement("i",{className:"fa fa-thumbs-up","aria-hidden":"true"})))}));var d=null;return r&&o.pick&&(d=a.default.createElement("div",{className:"col-12"},a.default.createElement("h4",{className:"text-info"},"Pick ",o.pick," cards ",a.default.createElement("button",{className:"btn btn-success",onClick:this.sendCards},"Send")))),a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-md-12 col-lg"},a.default.createElement(c.Login,{joined:n,started:r,onJoin:this.joinGame,playerName:e,handleInput:this.handleInputChange,startStopGame:this.startStopGame}),a.default.createElement(i.Players,{players:t})),a.default.createElement("div",{className:"col-md-12 col-lg"},a.default.createElement(l.BlackCard,{blackCard:o})),a.default.createElement("div",{className:"w-100 d-lg-none d-md-block"}),a.default.createElement("div",{className:"col-md-12 col-lg-8"},a.default.createElement("div",{className:"row"},d,a.default.createElement(s.WhiteCards,{cards:u,blackcard:o,whiteCardSelected:this.selectCard})),a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col"},a.default.createElement("h4",{className:"text-info"},"Respuestas"),a.default.createElement("ul",null,f)))))}}]),t}()},4:function(e,t,n){},48:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Players=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.players;return t.length?e.createElement("ul",null,t.map(function(t){return e.createElement("li",{key:t},t)})):e.createElement("span",{className:"text text-info"},"Nobody is playing")}}]),r}()}).call(this,n(1))},49:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Login=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.playerName,n=this.props.joined,r=this.props.started,a=e.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:this.props.startStopGame},"Start Game"),o=e.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.props.startStopGame},"Stop Game"),i=a;return r&&(i=o),n?e.createElement("form",{onSubmit:this.props.onJoin},e.createElement("div",{className:"form-group"},e.createElement("label",{className:"control-label"},"Welcome ",t)," ",e.createElement("button",{type:"submit",className:"btn btn-default btn-sm"},"Leave")," ",i)):e.createElement("form",{onSubmit:this.props.onJoin},e.createElement("input",{name:"playerName",placeholder:"Player Name",type:"text",className:"form-control",value:t,onChange:this.props.handleInput,required:!0}),e.createElement("button",{type:"submit",className:"btn btn-default"},"Join"))}}]),r}()}).call(this,n(1))},50:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.BlackCard=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.blackCard,n=null;return n=t.id?t.text:t.text?t.text:"N/A",e.createElement("div",{className:"card"},e.createElement("div",{className:"card-body text-light bg-dark rounded"},n))}}]),r}()}).call(this,n(1))},51:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.WhiteCards=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(52);t.WhiteCards=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.selectCard=t.selectCard.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),r(n,[{key:"selectCard",value:function(e){this.props.whiteCardSelected(e)}},{key:"render",value:function(){var t=this,n=this.props.cards,r=null,o=null,i=null;return n.length?(o=n.map(function(n,r){if(r>4)return e.createElement(a.WhiteCard,{key:n.id,card:n,onCardSelected:t.selectCard})}),r=n.map(function(n,r){if(r<=4)return e.createElement(a.WhiteCard,{key:n.id,card:n,onCardSelected:t.selectCard})}),i=e.createElement("div",{className:"row"},e.createElement("div",{className:"col"},e.createElement("ul",{className:"list-group"},r)),e.createElement("div",{className:"col"},e.createElement("ul",{className:"list-group"},o)))):i=e.createElement("h3",null,"No white cards."),e.createElement("div",{className:"col"},i)}}]),n}()}).call(this,n(1))},52:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.WhiteCard=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.selectCard=t.selectCard.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"selectCard",value:function(e){e.preventDefault(),this.props.onCardSelected(this.props.card)}},{key:"render",value:function(){var t="list-group-item";return this.props.card.selected&&(t+=" active"),e.createElement("li",{className:t,onClick:this.selectCard},this.props.card.text)}}]),r}()}).call(this,n(1))}},[[17,1,0]]]);