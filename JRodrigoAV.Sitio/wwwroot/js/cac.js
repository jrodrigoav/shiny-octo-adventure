!function(e){function t(t){for(var r,i,c=t[0],l=t[1],s=t[2],f=0,p=[];f<c.length;f++)i=c[f],o[i]&&p.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={2:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;a.push([65,0]),n()}({30:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.WhiteCard=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.selectCard=t.selectCard.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"selectCard",value:function(e){e.preventDefault(),this.props.onCardSelected(this.props.card)}},{key:"render",value:function(){var t="list-group-item";return this.props.card.selected&&(t+=" active"),e.createElement("li",{className:t,onClick:this.selectCard},this.props.card.text)}}]),r}()}).call(this,n(4))},31:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.WhiteCards=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(30);t.WhiteCards=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.selectCard=t.selectCard.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),r(n,[{key:"selectCard",value:function(e){this.props.whiteCardSelected(e)}},{key:"render",value:function(){var t=this,n=this.props.cards,r=null,a=null,i=null;return n.length?(a=n.map(function(n,r){if(r>4)return e.createElement(o.WhiteCard,{key:n.id,card:n,onCardSelected:t.selectCard})}),r=n.map(function(n,r){if(r<=4)return e.createElement(o.WhiteCard,{key:n.id,card:n,onCardSelected:t.selectCard})}),i=e.createElement("div",{className:"row"},e.createElement("div",{className:"col"},e.createElement("ul",{className:"list-group"},r)),e.createElement("div",{className:"col"},e.createElement("ul",{className:"list-group"},a)))):i=e.createElement("h3",null,"No white cards."),e.createElement("div",{className:"col"},i)}}]),n}()}).call(this,n(4))},32:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.BlackCard=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.blackCard,n=null;return n=t.id?t.text:t.text?t.text:"N/A",e.createElement("div",{className:"card"},e.createElement("div",{className:"card-body text-light bg-dark rounded"},n))}}]),r}()}).call(this,n(4))},33:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Login=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.playerName,n=this.props.joined,r=this.props.started,o=e.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:this.props.startStopGame},"Start Game"),a=e.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.props.startStopGame},"Stop Game"),i=o;return r&&(i=a),n?e.createElement("form",{onSubmit:this.props.onJoin},e.createElement("div",{className:"form-group"},e.createElement("label",{className:"control-label"},"Welcome ",t)," ",e.createElement("button",{type:"submit",className:"btn btn-default btn-sm"},"Leave")," ",i)):e.createElement("form",{onSubmit:this.props.onJoin},e.createElement("input",{name:"playerName",placeholder:"Player Name",type:"text",className:"form-control",value:t,onChange:this.props.handleInput,required:!0}),e.createElement("button",{type:"submit",className:"btn btn-default"},"Join"))}}]),r}()}).call(this,n(4))},34:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Players=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"render",value:function(){var t=this.props.players;return t.length?e.createElement("ul",null,t.map(function(t){return e.createElement("li",{key:t},t)})):e.createElement("span",{className:"text text-info"},"Nobody is playing")}}]),r}()}).call(this,n(4))},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(4)),a=(n(12),u(n(21)),u(n(15))),i=n(34),c=n(33),l=n(32),s=n(31);function u(e){return e&&e.__esModule?e:{default:e}}var f=n(29);t.App=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={playerName:"",started:!1,joined:!1,players:[],gameCard:{},whiteCards:[],selectedCards:[],votes:[]},n.handleInputChange=n.handleInputChange.bind(n),n.joinGame=n.joinGame.bind(n),n.startStopGame=n.startStopGame.bind(n),n.selectCard=n.selectCard.bind(n),n.sendCards=n.sendCards.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"resetClient",value:function(e){void 0===e&&(e=this),e.setState({joined:!1,players:[],started:!1,whiteCards:[],selectedCards:[],gameCard:{},votes:[]})}},{key:"setupHub",value:function(){var e=f.HttpTransportType.WebSockets,t=this;t.gameConnection=(new f.HubConnectionBuilder).withUrl(document.location.protocol+"//"+document.location.host+"/game",{transport:e}).build(),t.gameConnection.onClosed=function(e){console.log("Connection closed")},t.gameConnection.on("PlayerJoined",function(e){t.setState({players:e})}),t.gameConnection.on("PlayerLeft",function(e){t.setState({players:e})}),t.gameConnection.on("GameStarted",function(e){return t.setState({started:e.started,gameCard:e.gameCard})}),t.gameConnection.on("GameStopped",function(){return t.setState({started:!1,gameCard:{},votes:[]})}),t.gameConnection.on("ReceiveCards",function(e){var n=a.default.shuffle(t.state.whiteCards.slice(0).concat(e));t.setState({whiteCards:n})}),t.gameConnection.on("ReceiveChoices",function(e){return t.setState({votes:e,gameCard:{text:"Time to vote!"}})}),t.gameConnection.start().then(function(){return t.gameConnection.invoke("JoinGame",t.state.playerName).then(function(e){t.setState({joined:e.joined,started:e.gameState.started,whiteCards:e.whiteCards,selectedCards:[]})})},function(e){console.log("Connection error")})}},{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,n))}},{key:"joinGame",value:function(e){if(e.preventDefault(),!1===this.state.joined)this.setupHub();else{var t=this;t.gameConnection.invoke("LeaveGame").then(function(){t.resetClient(),t.gameConnection.stop().catch(function(e){return console.log("Error closing connection "+e)})},function(e){return t.resetClient(t)})}}},{key:"startStopGame",value:function(e){e.preventDefault(),this.state.started?this.gameConnection.invoke("StopGame"):this.gameConnection.invoke("StartGame")}},{key:"selectCard",value:function(e){var t=this.state.whiteCards.slice(0),n=this.state.selectedCards.slice(0),r=this.state.gameCard.pick;a.default.forEach(t,function(t){t.id===e.id&&(t.selected?(t.selected=!1,a.default.remove(n,function(t){return t===e.id})):n.length<r&&(t.selected=!0,n.push(t.id)))}),this.setState({whiteCards:t,selectedCards:n})}},{key:"sendCards",value:function(e){e.preventDefault();this.state.selectedCards.slice(0);var t=this.state.whiteCards.slice(0);a.default.remove(t,function(e){return e.selected}),this.setState({whiteCards:t,selectedCards:[]}),this.gameConnection.invoke("SendCards",this.state.selectedCards)}},{key:"render",value:function(){var e=this.state.playerName,t=this.state.players,n=this.state.joined,r=this.state.started,a=this.state.gameCard,u=this.state.whiteCards,f=null;this.state.votes.length&&(f=this.state.votes.map(function(e){return o.default.createElement("li",{key:e.key},e.value," ",o.default.createElement("button",{className:"btn btn-sm btn-info"},o.default.createElement("i",{className:"fa fa-thumbs-up","aria-hidden":"true"})))}));var p=null;return r&&a.pick&&(p=o.default.createElement("div",{className:"col-12"},o.default.createElement("h4",{className:"text-info"},"Pick ",a.pick," cards ",o.default.createElement("button",{className:"btn btn-success",onClick:this.sendCards},"Send")))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12 col-lg"},o.default.createElement(c.Login,{joined:n,started:r,onJoin:this.joinGame,playerName:e,handleInput:this.handleInputChange,startStopGame:this.startStopGame}),o.default.createElement(i.Players,{players:t})),o.default.createElement("div",{className:"col-md-12 col-lg"},o.default.createElement(l.BlackCard,{blackCard:a})),o.default.createElement("div",{className:"w-100 d-lg-none d-md-block"}),o.default.createElement("div",{className:"col-md-12 col-lg-8"},o.default.createElement("div",{className:"row"},p,o.default.createElement(s.WhiteCards,{cards:u,blackcard:a,whiteCardSelected:this.selectCard})),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col"},o.default.createElement("h4",{className:"text-info"},"Respuestas"),o.default.createElement("ul",null,f)))))}}]),t}()},65:function(e,t,n){"use strict";(function(e){var t=n(12),r=n(56);(0,t.render)(e.createElement(r.App,null),document.getElementById("app"))}).call(this,n(4))}});